#user data: username -> [PIN, balance]
users = {
    "user1": ["1234", 1000.0],
    "user2": ["4321", 500.0],
}

def authenticate():
    print("Welcome to the Simple ATM")
    username = input("Enter username: ")
    pin = input("Enter PIN: ")
    if username in users and users[username][0] == pin:
        print(f"\nLogin successful. Welcome, {username}!\n")
        return username
    else:
        print("\nInvalid username or PIN.\n")
        return None

def check_balance(user):
    print(f"Your current balance is: ${users[user][1]:.2f}")

def deposit(user):
    amount = input("Enter amount to deposit: $")
    try:
        amount = float(amount)
        if amount <= 0:
            print("Deposit amount must be positive.")
            return
        users[user][1] += amount
        print(f"Deposited ${amount:.2f}. New balance: ${users[user][1]:.2f}")
    except ValueError:
        print("Invalid amount.")

def withdraw(user):
    amount = input("Enter amount to withdraw: $")
    try:
        amount = float(amount)
        if amount <= 0:
            print("Withdrawal amount must be positive.")
            return
        if amount > users[user][1]:
            print("Insufficient funds.")
            return
        users[user][1] -= amount  # Subtract withdrawal from balance
        print(f"Withdrew ${amount:.2f}. New balance: ${users[user][1]:.2f}")
    except ValueError:
        print("Invalid amount.")

def atm_menu(user):
    while True:
        print("\n--- ATM Menu ---")
        print("1. Check Balance")
        print("2. Deposit")
        print("3. Withdraw")
        print("4. Exit")
        choice = input("Select an option: ")

        if choice == "1":
            check_balance(user)
        elif choice == "2":
            deposit(user)
        elif choice == "3":
            withdraw(user)
        elif choice == "4":
            print("Thank you for using the ATM. Goodbye!")
            break
        else:
            print("Invalid option. Please try again.")

# Main program
user = authenticate()
if user:
    atm_menu(user)
